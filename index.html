<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://kit.fontawesome.com/1b731901c2.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
<script>    

$(document).ready(function() {

var container = $(".container");
var hour = $(".hour");
var saveBtn = $(".saveBtn");
var description = $(".description");
var now = dayjs();
var rows = 9
var columns = 3
var dataHour = 9

$("#currentDay").text(now.format('dddd, MMMM D'));
 
for(i=0; i < rows; i++){
  var newRow = $('<div class="row time-block">')
  container.append(newRow)
  for(j=0; j < columns; j++){
    if(j === 0){
      var newColumn0 = $(`<div id=${dataHour} class="hour col-1">`)
      newColumn0.text(now.hour(dataHour).format('h A'))
      dataHour++
      newRow.append(newColumn0)
    }else if(j === 1){
      var newColumn1 = $('<textarea class="description col-10" name="userInput">')
        newRow.append(newColumn1)
    }else if(j === 2){
      var newColumn2 = $('<button class="saveBtn btn fas fa-save col-1"> input=')
       newRow.append(newColumn2)
    }
  }
}


console.log(parseInt(j));

function pastpresentfuture() {
  if(parseInt(dataHour) > parseInt(now.format('h'))){
    description.addClass("past");
    
  } else if (parseInt(hour.text()) === parseInt(now.format('h'))){
    description.addClass("present");
  } else {
    description.addClass("future");
  }     
}

pastpresentfuture();  
/* function pastpresentfuture() {
var blockHour = parseInt($(this).attr("dataHour"))
console.log(now)
$(".description").each(function(){
  if(blockHour < now){
    $(this).addClass("past")
  }else if(blockHour == now){
    $(this).removeClass("past")
    $(this).addClass("present")
  }else {
    $(this).removeClass("past")
    $(this).removeClass("present")
    $(this).addClass("future")
  }
})
} */


saveBtn.on("click", function() {
   var time = $(this).siblings(".hour").text();
   var input = $(this).siblings(".userInput").val();
   localStorage.setItem(time, input);
});

function save(){
  $(".hour").each(function(){
    var currentTime = $(this).text();
    var storedInput = localStorage.getItem(currentTime);

    if (storedInput !== null) {
      $(this).siblings(".userInput").val(storedInput);
    }
  console.log(storedInput); 
  })
}


pastpresentfuture();
save();





/* 
- color-code for Past, Present, Future
     
-Can write into each time-block
-Save button save's what's written into local storage
-input is still there on page refresh 




--------------------------
the current day is displayed at the top of the calendar
WHEN I scroll down
THEN I am presented with time blocks for standard business hours
WHEN I view the time blocks for that day
THEN each time block is color-coded to indicate whether it is in the past, present, or future
WHEN I click into a time block
THEN I can enter an event
WHEN I click the save button for that time block
THEN the text for that event is saved in local storage
WHEN I refresh the page
THEN the saved events persist */

})
    </script>
  </body>
</html>
